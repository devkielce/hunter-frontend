"use strict";(()=>{var e={};e.id=23,e.ids=[23],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},2822:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>m,patchFetch:()=>h,requestAsyncStorage:()=>c,routeModule:()=>l,serverHooks:()=>R,staticGenerationAsyncStorage:()=>d});var n={};r.r(n),r.d(n,{POST:()=>p,maxDuration:()=>u});var s=r(49303),a=r(88716),o=r(60670),i=r(87070);let u=120;async function p(e){let t=process.env.BACKEND_URL;if(!t)return i.NextResponse.json({error:"BACKEND_URL not configured"},{status:500});let r=process.env.HUNTER_RUN_SECRET?.trim();if(!r)return i.NextResponse.json({error:"HUNTER_RUN_SECRET not configured. Set it in Vercel → Settings → Environment Variables (same value as APIFY_WEBHOOK_SECRET on Railway), then redeploy."},{status:500});let n=t.replace(/\/$/,"").trim(),s=n.startsWith("http://")||n.startsWith("https://")?n:`https://${n}`,a=`${s}/api/run`,o={};try{let t=await e.text();t.trim()&&(o=JSON.parse(t))}catch{}let u=new AbortController,p=setTimeout(()=>u.abort(),5e4);try{let e;let t=await fetch(a,{method:"POST",headers:{"Content-Type":"application/json","X-Run-Secret":r},body:JSON.stringify(o),signal:u.signal});clearTimeout(p);let n=await t.text();try{e=n?JSON.parse(n):{}}catch{return i.NextResponse.json({error:"Backend returned invalid JSON"},{status:502})}if(401===t.status){let t=e.error||"Unauthorized";return i.NextResponse.json({...e,error:`${t} – Set HUNTER_RUN_SECRET on Vercel to the same value as APIFY_WEBHOOK_SECRET on Railway and redeploy.`},{status:401})}if(500===t.status){let t=e.error||e.message||"Backend returned 500.";return i.NextResponse.json({...e,error:t},{status:500})}return i.NextResponse.json(e,{status:t.status})}catch(e){if(clearTimeout(p),e instanceof Error&&"AbortError"===e.name)return i.NextResponse.json({error:"Backend is taking too long (timeout). The run may still be in progress on Railway. Try again in a minute or check Railway logs."},{status:504});return i.NextResponse.json({error:"Backend request failed"},{status:502})}}let l=new s.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/run/route",pathname:"/api/run",filename:"route",bundlePath:"app/api/run/route"},resolvedPagePath:"/Users/arturwillonski/Documents/hunter-frontend/src/app/api/run/route.ts",nextConfigOutput:"",userland:n}),{requestAsyncStorage:c,staticGenerationAsyncStorage:d,serverHooks:R}=l,m="/api/run/route";function h(){return(0,o.patchFetch)({serverHooks:R,staticGenerationAsyncStorage:d})}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[948,972],()=>r(2822));module.exports=n})();